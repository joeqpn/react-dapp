{"ast":null,"code":"import _regeneratorRuntime from \"/Users/joe/Documents/truffle/projects/react-dapp/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/joe/Documents/truffle/projects/react-dapp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Web3 from \"web3\";\n\nvar detectMob = function detectMob() {\n  return new Promise(function (resolve, reject) {\n    if (navigator.userAgent.match(/Android/i) || navigator.userAgent.match(/webOS/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/BlackBerry/i) || navigator.userAgent.match(/Windows Phone/i)) {\n      resolve(true);\n    } else {\n      resolve(false);\n    }\n  });\n};\n\nvar getWeb3 = function getWeb3() {\n  return new Promise(function (resolve, reject) {\n    console.log(\"navigator agent is: \" + navigator.userAgent); //var isMobile = false; //initiate as false\n    // device detection\n    // if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) \n    //   || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4))) { \n    //   isMobile = true;\n    //   console.log(\"IsMobile: \" + isMobile);\n    // }\n    // Wait for loading completion to avoid race conditions with web3 injection timing.\n\n    window.addEventListener(\"load\",\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var web3, provider, _web, _provider, _web2;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(window.ethereum && detectMob() === false)) {\n                _context.next = 14;\n                break;\n              }\n\n              web3 = new Web3(window.ethereum);\n              _context.prev = 2;\n              _context.next = 5;\n              return window.ethereum.enable();\n\n            case 5:\n              console.log(\"Modern Web3 detected.\"); // Acccounts now exposed\n\n              resolve(web3);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](2);\n              reject(_context.t0);\n\n            case 12:\n              _context.next = 15;\n              break;\n\n            case 14:\n              // Legacy dapp browsers...\n              if (window.web3) {\n                /* // Use Mist/MetaMask's provider.\n                 const web3 = window.web3;\n                 console.log(\"Injected web3 detected.\");\n                 resolve(web3);\n                 */\n                provider = new Web3.providers.WebsocketProvider( //\"http://127.0.0.1:9545\"\n                \"ws://127.0.0.1:8546\", {\n                  headers: {\n                    Origin: \"forWebSocket\"\n                  }\n                });\n                _web = new Web3(provider);\n                console.log(\"No web3 instance injected, using Local web3.\");\n                resolve(_web);\n              } // Fallback to localhost; use dev console port by default...\n              else {\n                  //const provider = new Web3.providers.HttpProvider(\n                  _provider = new Web3.providers.WebsocketProvider(\"ws://127.0.0.1:8546\" //\"http://127.0.0.1:9545\"\n                  , {\n                    headers: {\n                      Origin: \"forWebSocket\"\n                    }\n                  });\n                  _web2 = new Web3(_provider);\n                  console.log(\"No web3 instance injected, using Local web3.\");\n                  resolve(_web2);\n                }\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[2, 9]]);\n    })));\n  });\n};\n\nexport default getWeb3;","map":{"version":3,"sources":["/Users/joe/Documents/truffle/projects/react-dapp/client/src/utils/getWeb3.js"],"names":["Web3","detectMob","Promise","resolve","reject","navigator","userAgent","match","getWeb3","console","log","window","addEventListener","ethereum","web3","enable","provider","providers","WebsocketProvider","headers","Origin"],"mappings":";;AAAA,OAAOA,IAAP,MAAiB,MAAjB;;AAEA,IAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA,SAClB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAoB;AAC9B,QAAIC,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,UAA1B,KACDF,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,QAA1B,CADC,IAEDF,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,SAA1B,CAFC,IAGDF,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,OAA1B,CAHC,IAIDF,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,OAA1B,CAJC,IAKDF,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,aAA1B,CALC,IAMDF,SAAS,CAACC,SAAV,CAAoBC,KAApB,CAA0B,gBAA1B,CANH,EAOC;AAECJ,MAAAA,OAAO,CAAC,IAAD,CAAP;AACA,KAVF,MAWK;AAEHA,MAAAA,OAAO,CAAC,KAAD,CAAP;AACA;AACF,GAhBF,CADkB;AAAA,CAAlB;;AAmBA,IAAMK,OAAO,GAAG,SAAVA,OAAU;AAAA,SACd,IAAIN,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC/BK,IAAAA,OAAO,CAACC,GAAR,CAAY,yBAAyBL,SAAS,CAACC,SAA/C,EAD+B,CAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACE;;AACAK,IAAAA,MAAM,CAACC,gBAAP,CAAwB,MAAxB;AAAA;AAAA;AAAA;AAAA,6BAAgC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oBAE1BD,MAAM,CAACE,QAAP,IAAmBZ,SAAS,OAAO,KAFT;AAAA;AAAA;AAAA;;AAGtBa,cAAAA,IAHsB,GAGf,IAAId,IAAJ,CAASW,MAAM,CAACE,QAAhB,CAHe;AAAA;AAAA;AAAA,qBAMpBF,MAAM,CAACE,QAAP,CAAgBE,MAAhB,EANoB;;AAAA;AAQ1BN,cAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ,EAR0B,CAS1B;;AACAP,cAAAA,OAAO,CAACW,IAAD,CAAP;AAV0B;AAAA;;AAAA;AAAA;AAAA;AAY1BV,cAAAA,MAAM,aAAN;;AAZ0B;AAAA;AAAA;;AAAA;AAe9B;AACK,kBAAIO,MAAM,CAACG,IAAX,EAAiB;AACrB;;;;;AAKME,gBAAAA,QANe,GAMJ,IAAIhB,IAAI,CAACiB,SAAL,CAAeC,iBAAnB,EACd;AACA,qCAFc,EAEQ;AACpBC,kBAAAA,OAAO,EAAE;AACPC,oBAAAA,MAAM,EAAE;AADD;AADW,iBAFR,CANI;AAcdN,gBAAAA,IAdc,GAcP,IAAId,IAAJ,CAASgB,QAAT,CAdO;AAepBP,gBAAAA,OAAO,CAACC,GAAR,CAAY,8CAAZ;AACAP,gBAAAA,OAAO,CAACW,IAAD,CAAP;AACD,eAjBI,CAkBL;AAlBK,mBAmBA;AACH;AACME,kBAAAA,SAFH,GAEc,IAAIhB,IAAI,CAACiB,SAAL,CAAeC,iBAAnB,CACf,qBADe,CAEf;AAFe,oBAGd;AACCC,oBAAAA,OAAO,EAAE;AACPC,sBAAAA,MAAM,EAAE;AADD;AADV,mBAHc,CAFd;AAWGN,kBAAAA,KAXH,GAWU,IAAId,IAAJ,CAASgB,SAAT,CAXV;AAYHP,kBAAAA,OAAO,CAACC,GAAR,CAAY,8CAAZ;AACAP,kBAAAA,OAAO,CAACW,KAAD,CAAP;AACD;;AAjD6B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAhC;AAmDD,GA7DD,CADc;AAAA,CAAhB;;AAgEA,eAAeN,OAAf","sourcesContent":["import Web3 from \"web3\";\n\nconst detectMob = () => \nnew Promise((resolve, reject)=> { \n  if( navigator.userAgent.match(/Android/i)\n  || navigator.userAgent.match(/webOS/i)\n  || navigator.userAgent.match(/iPhone/i)\n  || navigator.userAgent.match(/iPad/i)\n  || navigator.userAgent.match(/iPod/i)\n  || navigator.userAgent.match(/BlackBerry/i)\n  || navigator.userAgent.match(/Windows Phone/i)\n  ){\n    \n    resolve(true);\n   }\n  else {\n    \n    resolve(false);\n   }\n });\n\nconst getWeb3 = () =>\n  new Promise((resolve, reject) => {\n    console.log(\"navigator agent is: \" + navigator.userAgent)\n  //var isMobile = false; //initiate as false\n  // device detection\n  // if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) \n  //   || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4))) { \n  //   isMobile = true;\n  //   console.log(\"IsMobile: \" + isMobile);\n  // }\n    // Wait for loading completion to avoid race conditions with web3 injection timing.\n    window.addEventListener(\"load\", async () => {\n      // Modern dapp browsers pc based...\n      if (window.ethereum && detectMob() === false) {\n        const web3 = new Web3(window.ethereum);\n        try {\n          // Request account access if needed\n          await window.ethereum.enable();\n          \n          console.log(\"Modern Web3 detected.\");\n          // Acccounts now exposed\n          resolve(web3);\n        } catch (error) {\n          reject(error);\n        }\n      }\n      // Legacy dapp browsers...\n      else if (window.web3) {\n       /* // Use Mist/MetaMask's provider.\n        const web3 = window.web3;\n        console.log(\"Injected web3 detected.\");\n        resolve(web3);\n        */\n       const provider = new Web3.providers.WebsocketProvider(\n          //\"http://127.0.0.1:9545\"\n          \"ws://127.0.0.1:8546\",{\n            headers: {\n              Origin: \"forWebSocket\"\n            }\n          }\n        );\n        const web3 = new Web3(provider);\n        console.log(\"No web3 instance injected, using Local web3.\");\n        resolve(web3);\n      }\n      // Fallback to localhost; use dev console port by default...\n      else {\n        //const provider = new Web3.providers.HttpProvider(\n        const provider = new Web3.providers.WebsocketProvider(\n          \"ws://127.0.0.1:8546\"\n          //\"http://127.0.0.1:9545\"\n          ,{\n            headers: {\n              Origin: \"forWebSocket\"\n            }\n          }\n        );\n        const web3 = new Web3(provider);\n        console.log(\"No web3 instance injected, using Local web3.\");\n        resolve(web3);\n      }\n    });\n  });\n\nexport default getWeb3;\n"]},"metadata":{},"sourceType":"module"}